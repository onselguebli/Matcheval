<div class="container my-5">
  <h3 class="mb-4 text-center">ğŸ“‹ Mes offres et candidatures</h3>

  <div *ngFor="let offre of offres" class="card shadow-sm border-0 mb-4">
    <div class="card-header bg-secondary text-white fw-semibold">
      {{ offre.titre }}
    </div>
    <div class="card-body">
      <h6 class="fw-bold text-muted mb-2">ğŸ‘¤ Candidatures :</h6>

      <ul *ngIf="offre.candidatures?.length > 0; else noCandidats" class="list-group">
        <li *ngFor="let c of offre.candidatures" class="list-group-item d-flex justify-content-between align-items-center">
          <span class="text-dark fw-medium" (click)="showDetails(c.id)" style="cursor: pointer;">
            {{ c.candidatPrenom }} {{ c.candidatNom }}
          </span>
          <small class="text-muted">{{ c.dateSoumission | date: 'short' }}</small>
        </li>
      </ul>

      <ng-template #noCandidats>
        <p class="text-muted fst-italic">Aucune candidature pour cette offre.</p>
      </ng-template>
    </div>
  </div>
</div>

<!-- Modal personnalisÃ© -->
<div *ngIf="selectedCandidature" class="modal-wrapper">
  <div class="modal-backdrop" (click)="closeDetails()"></div>
  <div class="modal-content card shadow-lg p-4">

    <h5 class="mb-3 text-center">ğŸ“ DÃ©tails de la candidature</h5>

    <p><strong>ğŸ‘¤ Nom :</strong> {{ selectedCandidature.candidatPrenom }} {{ selectedCandidature.candidatNom }}</p>
    <p><strong>ğŸ“§ Email :</strong> {{ selectedCandidature.candidatEmail }}</p>
    <p><strong>ğŸ’¬ Commentaire :</strong> {{ selectedCandidature.commentaire }}</p>
    <p><strong>ğŸ·ï¸ Offre :</strong> {{ selectedCandidature.titreOffre }}</p>

    <div class="mb-3">
      <label for="statutSelect" class="form-label fw-semibold">ğŸ› ï¸ Statut :</label>
      <select id="statutSelect" [(ngModel)]="selectedCandidature.statut" class="form-select">
        <option disabled selected>Choisir le statut</option>
        <option value="En attente">â³ En attente</option>
        <option value="AcceptÃ©e">âœ… AcceptÃ©e</option>
        <option value="RefusÃ©e">âŒ RefusÃ©e</option>
      </select>
    </div>

    <div class="d-flex justify-content-end gap-2">
      <button class="btn btn-success" (click)="updateStatut()">ğŸ’¾ Mettre Ã  jour</button>
      <button class="btn btn-outline-secondary" (click)="closeDetails()">Fermer</button>
    </div>
  </div>
</div>
